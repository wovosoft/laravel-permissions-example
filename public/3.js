(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{13:function(t,e,a){var r=a(32);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(15)(r,n);r.locals&&(t.exports=r.locals)},16:function(t,e,a){"use strict";var r=a(2),n={props:{fields:{type:Array,default:function(){return[]}},datatable:Object,value:{type:String,default:""},custom_buttons:{type:Array,default:function(){return[]}}},methods:{range:r.e,changeVisibility:r.a,startCase:r.g}},o=(a(31),a(1)),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.datatable.per_page,expression:"datatable.per_page"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.datatable,"per_page",e.target.multiple?a:a[0])}}},t._l(t.range(),(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Type and Hit Enter to Search the table, ESC to clear"},domProps:{value:t.value},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.target.value="",void t.$emit("input",""))},change:function(e){t.datatable.current_page=1},input:function(e){return t.$emit("input",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-4 text-right"},[a("div",{staticClass:"btn-group"},t._l(t.custom_buttons,(function(e,r){return t.custom_buttons&&t.custom_buttons.length?a("button",{key:r,staticClass:"btn",class:e.variant?"btn-"+e.variant:"btn-dark",attrs:{type:"button"},on:{click:e.method}},[e.icon?a("i",{class:e.icon}):t._e(),t._v(" "+t._s(e.text)+"\n            ")]):t._e()})),0),t._v(" "),a("b-dropdown",{staticClass:"columns-dropdown p-0",attrs:{text:"Columns",right:"",variant:"primary"}},[a("ul",{staticClass:"list-group"},t._l(t.fields,(function(e,r){return a("li",{key:r,staticClass:"list-group-item"},[a("b-form-checkbox",{attrs:{value:!0,"uncheched-value":!1},on:{change:function(a){return t.changeVisibility(e,r)}},model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"field.visible"}},[t._v("\n                        "+t._s(t.startCase(e.label||e.key))+"\n                    ")])],1)})),0)])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Per Page")])])}],!1,null,null,null);e.a=s.exports},17:function(t,e,a){var r=a(34);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(15)(r,n);r.locals&&(t.exports=r.locals)},2:function(t,e,a){"use strict";function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:"key",value:"value"},r=[];for(var n in t)if(!e.includes(n)){var o={};o[a.key]=n,o[a.value]=t[n],r.push(o)}return r}function s(t,e){"string"!=typeof this.fields[e].thClass&&(this.fields[e].thClass=""),"string"!=typeof this.fields[e].tdClass&&(this.fields[e].tdClass=""),t.visible?(this.fields[e].thClass+=" d-none",this.fields[e].tdClass+=" d-none"):(this.fields[e].thClass=this.fields[e].thClass.replace("d-none","").trim(),this.fields[e].tdClass=this.fields[e].tdClass.replace("d-none","").trim())}function i(t,e,a){this.$bvToast.toast(t.msg,{title:t.title,variant:t.type,autoHideDelay:e||3e3,appendToast:a||!1})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return r(Array(e).keys()).map((function(e){return e*t+t}))}function u(t){return!0===t||!1===t}function d(t){return t.fields.map((function(t){if(u(t.visible)&&t.visible&&(!u(t.searchable)||t.searchable))return t.key})).filter((function(t){return null!=t&&""!==("string"==typeof t?t.trim():t)}))}a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return p}));var c=/_/g,f=/([a-z])([A-Z])/g,m=/(\s|^)(\w)/g;function p(t){return t.replace(c," ").replace(f,(function(t,e,a){return e+" "+a})).replace(m,(function(t,e,a){return e+a.toUpperCase()}))}e.b={data:function(){return{search:"",currentItem:{},datatable:{per_page:10,current_page:1,total:0,from:0,to:0},fields:[]}},mounted:function(){var t;(t=this).fields.forEach((function(e){u(e.visible)||t.$set(e,"visible",!0),u(e.visible)&&!e.visible&&(t.$set(e,"thClass","d-none"),t.$set(e,"tdClass","d-none"))})),function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];"function"==typeof e?e.apply(void 0,r(a)):t.$root.$on("bv::modal::hidden",(function(e,a){"addModal"===a?t.form={}:"viewModal"===a&&(t.currentItem={}),"function"==typeof n&&n.apply(void 0,r(o))}))}(this)},methods:{getItems:function(t){var e,a=this;return axios.post(this.api_url+"?page="+(t.currentPage?t.currentPage:1),{per_page:this.datatable.per_page,orderBy:t.sortBy||"id",order:(e=t.sortDesc,u(e)&&e?"desc":"asc"),filter:t.filter,columns:d(this)}).then((function(t){return a.datatable.total=t.data.total,a.datatable.from=t.data.from,a.datatable.to=t.data.to,a.datatable.current_page=t.data.current_page,t.data.data})).catch((function(t){return console.log(t.response),[]}))},onSubmit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];axios.post(this.submit_url,this.form,{headers:{"Content-Type":"multipart/form-data"}}).then((function(n){t.$bvModal.hide("addModal"),t.msgBox(n.data),t.$refs.datatable.refresh(),e&&e.apply(void 0,r(a))})).catch((function(e){t.msgBox(e.response),console.log(e.response)}))},trash:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datatable",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(n){n&&axios.post(r||e.trash_url,{id:t}).then((function(t){e.msgBox(t.data),e.$refs[a].refresh()})).catch((function(t){e.msgBox(t.response),console.log(t.response)}))})).catch((function(t){console.log(t)}))},msgBox:i,obj2Table:o,startCase:p}}},31:function(t,e,a){"use strict";var r=a(13);a.n(r).a},32:function(t,e,a){(t.exports=a(14)(!1)).push([t.i,".columns-dropdown .dropdown-menu {\n  padding: 0 !important;\n  border: 0 !important;\n}\n.columns-dropdown .list-group-item label {\n  cursor: pointer;\n}",""])},33:function(t,e,a){"use strict";var r=a(17);a.n(r).a},34:function(t,e,a){(t.exports=a(14)(!1)).push([t.i,".custom-control-w-25 .custom-control {\n  min-width: 20%;\n}",""])},4:function(t,e,a){"use strict";var r={props:{datatable:Object}},n=a(1),o=Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t.datatable.to?[t._v("\n            Showing "+t._s(t.datatable.from||0)+" to "+t._s(t.datatable.to||0)+" = "+t._s(t.datatable.to-t.datatable.from+t.datatable.from)+" items of\n            "+t._s(t.datatable.total)+" items.\n        ")]:[t._v("No Items Found")]],2),t._v(" "),a("div",{staticClass:"col"},[a("b-pagination",{attrs:{align:"right",size:"sm","total-rows":t.datatable.total,"per-page":t.datatable.per_page,"aria-controls":"datatable"},model:{value:t.datatable.current_page,callback:function(e){t.$set(t.datatable,"current_page",e)},expression:"datatable.current_page"}})],1)])}),[],!1,null,"0c3a5b90",null);e.a=o.exports},67:function(t,e,a){"use strict";a.r(e);var r=a(16),n=a(4),o={props:{password_enabled:{type:Boolean,default:!0},submit_url:{type:String,default:null},search_url:{type:String,default:"/backend/roles/search"},data_url:{type:String,default:"/backend/users/data"},value:{type:Object,default:function(){return{id:null}}},hide_submit:{type:Boolean,default:!1}},mounted:function(){var t=this;this.form=JSON.parse(JSON.stringify(this.value)),this.form.roles||this.$set(this.form,"roles",[]),axios.post(this.data_url,{roles:this.roles.length<=0&&["id","name"],permissions:this.permissions.length<=0&&["id","name"],direct_permissions:this.form.id||!1}).then((function(e){e.data.roles&&(t.roles=(e.data.roles||[]).map((function(t){return t.name}))),e.data.permissions&&(t.permissions=(e.data.permissions||[]).map((function(t){return t.name}))),e.data.direct_permissions?t.$set(t.form,"direct_permissions",e.data.direct_permissions):t.form.direct_permissions=[]})).catch((function(e){console.log(e.response),t.$emit("error",e.response)}))},watch:{form:{handler:function(t){this.$emit("input",t)},deep:!0}},data:function(){return{temp_role:null,form:{},roles:[],permissions:[],direct_permissions:[]}},methods:{onSubmit:function(){var t=this;axios.post(this.submit_url,this.form).then((function(e){t.$emit("created",e.data)})).catch((function(e){t.$emit("error",e.response),console.log(e.response.data)}))},hitSubmit:function(){this.$refs.submitBtn.click()}}},s=(a(33),a(1)),i=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{label:"Name *"}},[a("b-form-input",{attrs:{placeholder:"Name",required:!0},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Email"}},[a("b-form-input",{attrs:{type:"email",placeholder:"Email Address",required:!0},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),!t.form.id||t.form.id&&t.password_enabled?a("b-form-group",{attrs:{label:"Password "+(t.form.id?"":"*")}},[a("b-form-input",{attrs:{type:"password",autocomplete:"off",name:"password",required:!t.form.id},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1):t._e(),t._v(" "),a("b-form-group",{attrs:{label:"Roles *"}},[a("b-form-select",{attrs:{required:!0,options:t.roles},on:{input:function(e){e&&t.form.roles.indexOf(e)<0&&t.form.roles.push(e)}},model:{value:t.temp_role,callback:function(e){t.temp_role=e},expression:"temp_role"}},[a("b-form-select-option",{attrs:{value:null}},[t._v("Please select an option")])],1),t._v(" "),t._l(t.form.roles,(function(e,r){return a("b-button",{key:r,staticClass:"m-1",attrs:{size:"sm",title:"Click to Remove"},on:{click:function(){t.temp_role==t.form.roles[r]&&(t.temp_role=null),t.form.roles.splice(r,1)}}},[a("b-icon-x"),t._v("\n                    "+t._s(e)+"\n                ")],1)}))],2),t._v(" "),a("b-button",{ref:"submitBtn",attrs:{variant:"primary",hidden:t.hide_submit,block:"",type:"submit"}},[t._v("SUBMIT")])],1)]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("b-card",{attrs:{header:"Direct Permissions"}},[a("b-form-checkbox-group",{staticClass:"custom-control-w-25",attrs:{options:t.permissions},model:{value:t.form.direct_permissions,callback:function(e){t.$set(t.form,"direct_permissions",e)},expression:"form.direct_permissions"}})],1)],1)])}),[],!1,null,null,null).exports,l=a(2),u=a(8),d=a(9),c={name:"UsersList",components:{DtHeader:r.a,DtFooter:n.a,AddItem:i,DtTable:u.a,DataView:d.a},mixins:[l.b],props:{password_enabled:{type:Boolean,default:!0},title:{type:String,default:""},api_url:{type:String,default:"/backend/users/list"},trash_url:{type:String,default:"/backend/users/delete"},submit_url:{type:String,default:"/backend/users/store"},add_modal_title:{type:String,default:"Add / Edit User"},view_modal_title:{type:String,default:"View User"},custom_buttons:{type:Array,default:function(){var t=this;return[{text:"Add",method:function(){t.$bvModal.show("addModal")}}]}}},data:function(){return{form:{},fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"email",sortable:!0},{key:"created_at",sortable:!0},{key:"updated_at",sortable:!0},{key:"action",sortable:!1,searchable:!1,thClass:"text-right",tdClass:"text-right"}]}}},f=Object(s.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dt-table",{attrs:{title:t.title,fields:t.fields,datatable:t.datatable,custom_buttons:t.custom_buttons},scopedSlots:t._u([{key:"table",fn:function(){return[a("b-table",{ref:"datatable",attrs:{variant:"primary",responsive:"md",hover:"",bordered:"",small:"",striped:"","head-variant":"dark",items:t.getItems,fields:t.fields,id:"datatable",filter:t.search,"per-page":t.datatable.per_page,"current-page":t.datatable.current_page},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.viewModal",modifiers:{viewModal:!0}}],attrs:{variant:"primary"},on:{click:function(){t.currentItem=JSON.parse(JSON.stringify(e.item)),t.currentItem.roles=t.currentItem.roles.map((function(t){return t.name}))}}},[a("i",{staticClass:"fa fa-eye"})]),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addModal",modifiers:{addModal:!0}}],attrs:{variant:"warning"},on:{click:function(){t.form=JSON.parse(JSON.stringify(e.item)),t.form.roles=t.form.roles.map((function(t){return t.name}))}}},[a("i",{staticClass:"fa fa-edit"})]),t._v(" "),a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return t.trash(e.item.id)}}},[a("i",{staticClass:"fa fa-trash"})])],1)]}}])})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("b-modal",{attrs:{id:"addModal",title:t.add_modal_title,size:"xl","header-bg-variant":"dark","header-text-variant":"light"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.close;return[a("b-button-group",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.$refs.ItemAdd.hitSubmit()}}},[t._v("SUBMIT")]),t._v(" "),a("b-button",{on:{click:function(t){return r()}}},[t._v("Close")])],1)]}}])},[a("add-item",{ref:"ItemAdd",attrs:{hide_submit:!0,submit_url:t.submit_url,password_enabled:t.password_enabled},on:{created:function(e){t.$refs.datatable.refresh(),t.$bvModal.hide("addModal"),t.msgBox(e)},error:function(e){return t.msgBox(e.data)}},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}})],1),t._v(" "),a("b-modal",{attrs:{id:"viewModal",title:t.view_modal_title,size:"lg","header-bg-variant":"dark","header-text-variant":"light","no-body":""}},[a("data-view",{attrs:{item:t.currentItem,fields:[{key:"key",sortable:!0,formatter:function(e){return t.startCase(e)}},{key:"value",sortable:!0,formatter:function(e,a,r){return"created_at"!==r.key&&"updated_at"!==a||!e?"roles"===r.key&&e&&Array.isArray(e)?e.join(", "):"permissions"===r.key&&e&&Array.isArray(e)?e.map((function(e){return t.startCase(e.name)})).join(", "):e:e}}]}})],1)],1)}),[],!1,null,null,null);e.default=f.exports},8:function(t,e,a){"use strict";var r=a(16),n=a(4),o={components:{DtHeader:r.a,DtFooter:n.a},props:{title:{type:String,default:""},fields:{type:Array,default:function(){return[]}},datatable:{type:Object,default:function(){return{per_page:10,current_page:1,total:0,from:0,to:0}}},value:{type:String,default:""},custom_buttons:{type:Array,default:function(){return[]}}},data:function(){return{ff:[],cbuttons:[1,2,3]}}},s=a(1),i=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{attrs:{title:t.title},scopedSlots:t._u([{key:"header",fn:function(){return[a("dt-header",{attrs:{custom_buttons:t.custom_buttons,datatable:t.datatable,fields:t.fields,value:t.value},on:{input:function(e){return t.$emit("input",e)}}})]},proxy:!0},{key:"footer",fn:function(){return[a("dt-footer",{attrs:{datatable:t.datatable}})]},proxy:!0}])},[t._v(" "),t._t("table")],2)}),[],!1,null,"8fa1cc0a",null);e.a=i.exports},9:function(t,e,a){"use strict";var r=a(2),n={props:{headVariant:{type:String,default:"dark"},bordered:{type:Boolean,default:!0},small:{type:Boolean,default:!0},hover:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},item:{type:Object,required:!0},skip:{type:Array,default:function(){return[]}},as:{type:Object,default:function(){return{key:"key",value:"value"}}},fields:{type:Array,default:function(){return[{key:"key",sortable:!0,formatter:function(t){return Object(r.g)(t)}},{key:"value",sortable:!0}]}}},methods:{obj2Table:r.d,startCase:r.g}},o=a(1),s=Object(o.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",t._b({attrs:{items:t.obj2Table(t.item,t.skip,t.as),fields:t.fields,"head-variant":t.headVariant,bordered:t.bordered,small:t.small,hover:t.hover,striped:t.striped}},"b-table",t.$attrs,!1))}),[],!1,null,"3dc098b1",null);e.a=s.exports}}]);